<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.taobao.cun.auge.dal.mapper.WisdomCountyApplyExtMapper" >
  <resultMap id="BaseResultMap" type="com.taobao.cun.auge.dal.domain.WisdomCountyApply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 17 21:56:57 CST 2016.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
    <result column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
    <result column="creator" property="creator" jdbcType="VARCHAR" />
    <result column="modifier" property="modifier" jdbcType="VARCHAR" />
    <result column="is_deleted" property="isDeleted" jdbcType="CHAR" />
    <result column="leader_name" property="leaderName" jdbcType="VARCHAR" />
    <result column="job" property="job" jdbcType="VARCHAR" />
    <result column="county_id" property="countyId" jdbcType="BIGINT" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="leader_phone" property="leaderPhone" jdbcType="VARCHAR" />
    <result column="apply_attachment_id" property="applyAttachmentId" jdbcType="BIGINT" />
    <result column="function_attachment_id" property="functionAttachmentId" jdbcType="BIGINT" />
    <result column="state" property="state" jdbcType="VARCHAR" />
  </resultMap>

  <select id="getPageWisdomCountyApply" parameterType="com.taobao.cun.auge.dal.domain.WisdomCountyApplyExtExample" resultMap="BaseResultMap">
    select
    w.id,
    w.gmt_create,
    w.gmt_modified,
    w.creator,
    w.modifier,
    w.is_deleted,
    w.leader_name,
    w.job,
    w.county_id,
    w.remark,
    w.leader_phone,
    w.apply_attachment_id,
    w.function_attachment_id,
    w.state
    from wisdom_county_apply w, county_station s, cuntao_org org
    where w.county_id = s.id and s.org_id = org.id and s.is_deleted='n' and org.is_deleted='n' and w.is_deleted='n'
    <if test="orgIdPath != null and orgIdPath != ''" >
      and concat(org.temp_full_id_path, '/') like concat(#{orgIdPath,jdbcType=VARCHAR}, '/%')
    </if>
    <if test="status != null and status != ''" >
      and w.status = #{status,jdbcType=VARCHAR}
    </if>
  </select>

</mapper>